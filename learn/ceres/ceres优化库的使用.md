# ceres优化库的使用

Ceres是一个最小二乘问题的求解库。

为了让ceres帮助我们解决最小二乘问题，我们需要做以下几件事：

1. 定义每个参数块。参数块通常为平凡的变量，但在SLAM里面也可以定义成四元数、李代数这种特殊的结构。如果是向量，那么我们为每个参数块分配一个double数组来存储变量。
2. 定义残差块的计算方式。残差块通常关联若干参数块，对他们进行一些自定义的计算，然后返回残差值。Ceres对他们求平方和之后，作为目标函数的值。
3. 残差块往往也需要定义雅可比的计算方式。在ceres中，你可以使用它提供的自动求导，那么残差块需要按照特定的写法书写：残差的计算过程中，应该是一个带模板的括号运算符。这一点，我们通过例子进行说明。
4. 把所有参数加入ceres定义的problem对象中，调用solve函数求解即可。求解之前，我们可以传入一些配置信息，如迭代次数、终止条件等，也可以使用默认的配置。

